<h1 class="title-container">Register New Staff</h1>
<% @page_title = 'Staff | Register' %>

<%= render('shared/errors', model: @staff) %>

<%= form_with(model: @staff, html: { autoComplete: :on }, local: true) do |staff_form| %>
  <table class="table borderless">
    <tbody>
    <tr>
      <td>
        <%# Get the attributes that belong to the person class %>
        <%= staff_form.fields_for(:person) do |person_fields| %>
          <%= render('shared/personal_detail_fields', person_fields: person_fields, disabled: disabled) %>
        <% end %>
      </td>
    </tr>
    <tr>
      <td style="width: 50%; !important;">
        <fieldset>
          <legend>Account Details</legend>
          <table class="table borderless">
            <tbody>
            <tr>
              <td>
                <div class="form-group">
                  <%= staff_form.label(:userId, 'User ID') %><br/>
                  <%= staff_form.text_field(:userId, autocomplete: 'off', required: true, class: 'form-control') %>
                </div>
                <div class="form-group">
                  <%= staff_form.label(:email) %><br/>
                  <%= staff_form.email_field(:email, autocomplete: 'email', pattern: "[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$", required: true, class: 'form-control') %>
                </div>
                <div class="form-group">
                  <%= staff_form.label(:password) %>
                  <% if @minimum_password_length %>
                    <em>(<%= @minimum_password_length %> characters minimum)</em>
                  <% end %><br/>
                  <%= staff_form.password_field(:password, autocomplete: 'password', required: true, class: 'form-control') %>
                </div>
              </td>
              <!--Override bootstrap td specifically here-->
              <td style="vertical-align: bottom; !important;">
                <div class="form-group">
                  <%= staff_form.label(:password_confirmation, 'Password confirmation') %><br/>
                  <%= staff_form.password_field(:password_confirmation, autocomplete: 'passwordConfirmation', required: true, class: 'form-control') %>
                </div>
              </td>
              <td></td>
            </tr>
            </tbody>
          </table>
        </fieldset>
      </td>
      <td>
        <fieldset>
          <legend>Allocations</legend>
          <!--TODO finish this-->
          <table class="table borderless">
            <tbody>
            <tr>
              <%= staff_form.fields_for(:specialism) do |specialism_fields| %>
                <td>
                  <div class="form-group">
                    <%= specialism_fields.label(:speciality_id, 'Speciality') %><br/>
                    <%= specialism_fields.select(:speciality_id, speciality_options, autocomplete: 'speciality', class: 'form-control') %>
                  </div>
                </td>
              <% end %>
              <%= staff_form.fields_for(:job) do |job_fields| %>
                <td>
                  <div class="form-group">
                    <%= job_fields.label(:job_title_id, 'Job title') %><br/>
                    <%= job_fields.select(:job_title_id, job_title_options, autocomplete: 'jobTitle', class: 'form-control') %>
                  </div>
                </td>
              <% end %>
            </tr>
            <tr>
              <td>
                <div class="form-group">
                  <%= staff_form.label(:team_id) %><br/>
                  <%= staff_form.select(:team_id, team_options, autocomplete: 'team', required: true, class: 'form-control') %>
                </div>
              </td>
            </tr>
            </tbody>
          </table>
        </fieldset>
      </td>
    </tr>
    </tbody>
  </table>
  <div class="actions form-group">
    <table class="table borderless">
      <tbody>
      <tr>
        <td> <%= staff_form.submit('Cancel', { class: 'btn btn-secondary' }) %></td>
        <td>  <%= staff_form.submit('Register Staff', { class: 'btn btn-primary' }) %></td>
      </tr>
      </tbody>
    </table>
  </div>
<% end %>
